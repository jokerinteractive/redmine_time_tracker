<% unless time_log.nil? %>

$(function () {
    $('#time_log_add_booking_<%= time_log.id.to_s %>_issue_id').autocomplete({
        source:'tt_completer/get_issue.json?key=<%= key %>',
        minLength:0,
        select:function (event, ui) {
            $('#time_log_add_booking_<%= time_log.id.to_s %>_issue_id').val(ui.item.value);
            redmine_time_tracker.FieldUpdater.updateBookingProject('time_log_add_booking_<%= time_log.id.to_s %>');
        }
    });
});

$(document).ready(function() {
    (new redmine_time_tracker.AddBookingValidator('time_log_add_booking_<%= time_log.id.to_s %>')).validate();
});
<% end %>